var ghost = require('./cfg/ghost.js');
var gapi = require('./cmn/gapi.js');

exports.itfconf = function(){
	return {
		auth: false,
		type: "json",
		itfs: [
	        {
	            host: ghost.dscm.dcbusiness.addr,
	            port: ghost.dscm.dcbusiness.port,
	            iurl: "/wechatIndexApp?actn=realTimeFinancial",
	            uuid: "wechatIndexApp",
	            meth: "post",
	            type: "sdcm",
	            next: [],
	            func: callFunc1
	        }

		]
	};
}
function callFunc1(req,res,fld,fle){
	console.log("aaaaaaaaaaaaa");
	var ip = gapi.getIPv4(req.user.addr);

	var username = gapi.getParameter(req,'username');
	var password = gapi.getParameter(req,'password');
	var data = {
		"userId":111,
		"username":username,
		"password":password
	}
	console.log(JSON.stringify(data));
	req.session.user={
		"userId":data.userId,
		"username":username
	}
	res.setHeader('Access-Control-Allow-Origin', 'http://wechat.cnaidai.com');
	res.setHeader('Access-Control-Allow-Credentials', 'true');

	res.jsonp(gapi.toResult(200, "请求成功",req.session.user));
    return null;
}

exports.itfleft = function(req,res,fld,fle) {
	return null;
}


